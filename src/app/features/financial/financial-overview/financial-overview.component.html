<div class="overview-container">

  <!-- Seção 1: Dados que NÃO reagem ao filtro de data -->
  <div class="data-section">
    <h2 class="section-title">Status Atual da Carteira</h2>
    <div class="overview-cards">
      <mat-card class="overview-card overdue">
        <mat-card-header>
          <mat-card-title>Pagamentos Vencidos</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <p>{{ overduePayments | currency }}</p>
        </mat-card-content>
      </mat-card>

      <mat-card class="overview-card upcoming">
        <mat-card-header>
          <mat-card-title>A Receber (Próx. 30 dias)</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <p>{{ upcomingReceivables | currency }}</p>
        </mat-card-content>
      </mat-card>

      <mat-card class="overview-card in-progress">
        <mat-card-header>
          <mat-card-title>Valor em Andamento</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <p>{{ inProgressValue | currency }}</p>
        </mat-card-content>
      </mat-card>
    </div>
  </div>

  <!-- Seção 2: Dados que REAGEM ao filtro de data -->
  <div class="data-section">
    <h2 class="section-title">Resultados do Período Selecionado</h2>
    <div class="overview-cards period-cards">
      <mat-card class="overview-card received">
        <mat-card-header>
          <mat-card-title>Recebido no Período</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <p>{{ receivedInPeriod | currency }}</p>
        </mat-card-content>
      </mat-card>
    </div>
  </div>

  <!-- Monthly Invoiced Chart -->
  @if (monthlyChartData && monthlyChartData.length > 0) {
    <mat-card class="chart-card">
      <mat-card-header>
        <mat-card-title>Faturamento Mensal</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <ngx-charts-bar-vertical
          [results]="monthlyChartData"
          [xAxis]="true"
          [yAxis]="true"
          [legend]="false"
          [showXAxisLabel]="true"
          [animations]="false"
          [showYAxisLabel]="true"
          xAxisLabel="Mês"
          yAxisLabel="Valor Faturado">
        </ngx-charts-bar-vertical>
      </mat-card-content>
    </mat-card>
  }

</div>
