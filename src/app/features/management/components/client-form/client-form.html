<h2 mat-dialog-title>{{ isEditMode ? 'Editar Cliente' : 'Novo Cliente' }}</h2>
<div mat-dialog-content>
  <form [formGroup]="clientForm" (ngSubmit)="onSubmit()">
    <mat-form-field>
      <mat-label>Nome da Empresa</mat-label>
      <input matInput formControlName="company_name" required>
    </mat-form-field>

    <mat-form-field>
      <mat-label>Nome do Contato</mat-label>
      <input matInput formControlName="contact_name" required placeholder="Ex: Maria Souza">
      @if (clientForm.get('contact_name')?.hasError('required') && clientForm.get('contact_name')?.touched) {
        <mat-error>O nome do contato é obrigatório.</mat-error>
      }
      @if (clientForm.get('contact_name')?.hasError('pattern') && clientForm.get('contact_name')?.touched) {
        <mat-error>Por favor, insira o nome e sobrenome.</mat-error>
      }
    </mat-form-field>

    <mat-form-field>
      <mat-label>Email do Contato</mat-label>
      <input matInput formControlName="contact_email" required type="email">
      @if (clientForm.get('contact_email')?.hasError('required') && clientForm.get('contact_email')?.touched) {
        <mat-error>O email do contato é obrigatório.</mat-error>
      }
      @if (clientForm.get('contact_email')?.hasError('pattern') && clientForm.get('contact_email')?.touched) {
        <mat-error>Por favor, insira um email válido (ex: nome@dominio.com).</mat-error>
      }
    </mat-form-field>

    <mat-form-field>
      <mat-label>Telefone do Contato</mat-label>
      <input matInput formControlName="contact_phone" required placeholder="(XX) XXXXX-XXXX" mask="(00) 0000-0000||(00) 00000-0000">
      @if (clientForm.get('contact_phone')?.hasError('required') && clientForm.get('contact_phone')?.touched) {
        <mat-error>O telefone do contato é obrigatório.</mat-error>
      }
<!--      @if (clientForm.get('contact_phone')?.hasError('pattern') && clientForm.get('contact_phone')?.touched) {-->
<!--        <mat-error>Formato inválido. Use (XX) XXXXX-XXXX.</mat-error>-->
<!--      }-->
    </mat-form-field>

    <h3 class="form-subtitle">Contato Financeiro</h3>

    <mat-form-field>
      <mat-label>Nome do Contato Financeiro</mat-label>
      <input matInput formControlName="finance_contact_name" placeholder="Ex: Carlos Pereira">
      @if (clientForm.get('finance_contact_name')?.hasError('pattern') && clientForm.get('finance_contact_name')?.touched) {
        <mat-error>Por favor, insira o nome e sobrenome.</mat-error>
      }
    </mat-form-field>

    <mat-form-field>
      <mat-label>Email do Contato Financeiro</mat-label>
      <input matInput formControlName="finance_contact_email" type="email">
      @if (clientForm.get('finance_contact_email')?.hasError('pattern') && clientForm.get('finance_contact_email')?.touched) {
        <mat-error>Por favor, insira um email válido (ex: nome@dominio.com).</mat-error>
      }
    </mat-form-field>

    <mat-form-field>
      <mat-label>Telefone do Contato Financeiro</mat-label>
      <input matInput formControlName="finance_contact_phone" placeholder="(XX) XXXXX-XXXX" mask="(00) 0000-0000||(00) 00000-0000">
<!--      @if (clientForm.get('finance_contact_phone')?.hasError('pattern') && clientForm.get('finance_contact_phone')?.touched) {-->
<!--        <mat-error>Formato inválido. Use (XX) XXXXX-XXXX.</mat-error>-->
<!--      }-->
    </mat-form-field>

    <h3 class="form-subtitle">Status</h3>

    <mat-form-field>
      <mat-label>Status</mat-label>
      <mat-select formControlName="status" required>
        @for (status of clientStatuses; track status) {
          <mat-option [value]="status">{{ status | titlecase }}</mat-option>
        }
      </mat-select>
    </mat-form-field>
  </form>
</div>
<div mat-dialog-actions align="end">
  <button mat-button (click)="dialogRef.close()">Cancelar</button>
  <button mat-flat-button color="primary" (click)="onSubmit()" [disabled]="clientForm.invalid">
    Salvar
  </button>
</div>
